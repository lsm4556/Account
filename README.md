# Account 시스템 프로젝트

이 프로젝트는 Spring Boot와 Java를 이용하여 개발되었으며, Account(계좌) 관리 시스템을 구현합니다.

## 프로젝트 소개

Account 시스템은 사용자와 계좌 정보를 저장하고, 거래 요청을 받아 계좌에서 잔액을 감소하거나 증가시키는 기능을 제공합니다. 동시성 이슈로 인한 lost update를 해결하기 위해 여러 쓰레드 혹은 인스턴스에서 같은 계좌에 접근할 경우의 처리를 고려해야 합니다.

- Spring Boot와 Java를 활용합니다.
- 단위 테스트를 작성하여 코드를 검증합니다.
- H2 DB(memory DB 모드)를 사용합니다.
- Spring Data JPA를 이용하여 DB에 접근합니다.
- Embedded Redis를 활용합니다.
- API Request body와 Response body는 JSON 형식으로 표현합니다.
- 각 API는 요청과 응답 객체의 고유 구조를 갖습니다. 단, 실패 응답은 공통된 구조를 갖도록 합니다.

## 계좌 관련 API

### 1) 계좌 생성

- 파라미터: 사용자 아이디, 초기 잔액
- 결과
  - 실패: 사용자 없음, 계좌가 이미 10개인 경우
  - 성공
    - 계좌번호 (10자리 랜덤 숫자)
    - 응답정보: 사용자 아이디, 생성된 계좌 번호, 등록일시

### 2) 계좌 해지

- 파라미터: 사용자 아이디, 계좌 번호
- 결과
  - 실패: 사용자 없음, 사용자 아이디와 계좌 소유주 불일치, 계좌가 이미 해지됨, 잔액이 있는 경우
  - 성공
    - 응답: 사용자 아이디, 계좌번호, 해지일시

### 3) 계좌 확인

- 파라미터: 사용자 아이디
- 결과
  - 실패: 사용자 없음
  - 성공
    - 응답: (계좌번호, 잔액) 정보를 JSON list 형식으로 반환

## 거래 관련 API

### 1) 잔액 사용

- 파라미터: 사용자 아이디, 계좌 번호, 거래 금액
- 결과
  - 실패: 사용자 없음, 사용자 아이디와 계좌 소유주 불일치, 계좌가 이미 해지됨, 잔액 부족
  - 성공
    - 응답: 계좌번호, 거래 결과, 거래 ID, 거래 금액, 거래일시

### 2) 잔액 사용 취소

- 파라미터: 거래 ID, 계좌 번호, 거래 금액
- 결과
  - 실패: 원거래 금액과 취소 금액 불일치, 해당 거래의 계좌가 아닌 경우
  - 성공
    - 응답: 계좌번호, 거래 결과, 거래 ID, 취소 거래 금액, 거래일시

### 3) 거래 확인

- 파라미터: 거래 ID
- 결과
  - 실패: 해당 거래 ID가 없는 경우
  - 성공
    - 응답: 계좌번호, 거래 종류, 거래 결과, 거래 ID, 거래 금액, 거래일시

## 주의사항

- 계좌 생성 시 중복된 계좌 번호를 방지하기 위해 유의합니다.
- 거래 과정에서 동시성 문제를 고려하여 구현합니다.
